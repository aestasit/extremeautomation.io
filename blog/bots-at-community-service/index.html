<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta property="og:title" content="Bots at community service"><meta property="og:type" content="article"><meta property="og:description" content="Local software community/meet-up management involves a lot of repetitive tasks: event publishing, notifications, statistical reports. Groovy, AWS Lambda, Terraform and Slack appeared to be a good combination to help creating valuable automation scripts and bots integrated into team's chat and ready to help."><meta property="og:site_name" content="Extreme Automation"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Bots at community service"><meta name="twitter:description" content="Local software community/meet-up management involves a lot of repetitive tasks: event publishing, notifications, statistical reports. Groovy, AWS Lambda, Terraform and Slack appeared to be a good combination to help creating valuable automation scripts and bots integrated into team's chat and ready to help."><link rel="alternate" type="application/rss+xml" title="Extreme Automation RSS" href="/blog/rss.xml"><link rel="apple-touch-icon" sizes="57x57" href="/img/favicon/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/img/favicon/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/img/favicon/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/img/favicon/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/img/favicon/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/img/favicon/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/img/favicon/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/img/favicon/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" href="/img/favicon/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/img/favicon/favicon-194x194.png" sizes="194x194"><link rel="icon" type="image/png" href="/img/favicon/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/img/favicon/android-chrome-192x192.png" sizes="192x192"><link rel="icon" type="image/png" href="/img/favicon/favicon-16x16.png" sizes="16x16"><link rel="manifest" href="/img/favicon/manifest.json"><link rel="mask-icon" href="/img/favicon/safari-pinned-tab.svg" color="#2f3369"><link rel="shortcut icon" href="/img/favicon/favicon.ico"><meta name="msapplication-TileColor" content="#2f3369"><meta name="msapplication-TileImage" content="/img/favicon/mstile-144x144.png"><meta name="msapplication-config" content="/img/favicon/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link href="https://fonts.googleapis.com/css?family=Bitter:400,400italic,700" rel="stylesheet"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" rel="stylesheet"><link href="/css/style.css" rel="stylesheet"><script>!function (f, b, e, v, n, t, s) {
	if (f.fbq)return;
	n = f.fbq = function () {
		n.callMethod ?
				n.callMethod.apply(n, arguments) : n.queue.push(arguments)
	};
	if (!f._fbq)f._fbq = n;
	n.push = n;
	n.loaded = !0;
	n.version = '2.0';
	n.queue = [];
	t = b.createElement(e);
	t.async = !0;
	t.src = v;
	s = b.getElementsByTagName(e)[0];
	s.parentNode.insertBefore(t, s)
}(window,
		document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '316959828642232');
fbq('track', "PageView");</script><noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=316959828642232&amp;ev=PageView&amp;noscript=1"></noscript><title>Bots at community service â€” Extreme Automation</title></head><body><div id="wrapper"><section class="lightbox" id="lightbox-blog"><div class="content"><div class="container"><div class="image"><a class="close-lightbox" href="#close"><i class="ps-icon-resize"></i></a></div></div></div></section><section class="lightbox" id="lightbox-contact"><div class="container"><a class="close-lightbox" href="#close-contact">&times;</a><div class="block-title"><h2>Contact</h2><div class="tagline">Use this neat little form to contact me. Or write directly to &nbsp;<a href="mailto:info@extremeautomation.io">info@extremeautomation.io</a>.</div></div><ul class="social"><li><a class="twitter" href="https://twitter.com/codingandrey" target="_blank"><i class="socicon socicon-twitter"></i></a></li><li><a class="linkedin" href="http://lv.linkedin.com/in/andreyadamovich" target="_blank"><i class="socicon socicon-linkedin"></i></a></li><li><a class="slideshare" href="https://www.xing.com/profile/Andrey_Adamovich" target="_blank"><i class="socicon socicon-xing"></i></a></li><li><a class="facebook" href="https://www.facebook.com/andrejs.adamovics" target="_blank"><i class="socicon socicon-facebook"></i></a></li></ul><form class="form" id="contact-form" action="https://formcarry.com/s/BkypGMmuf" method="POST" accept-charset="UTF-8"><input type="hidden" name="_gotcha"><div class="input-group"><input name="name" placeholder="Name" id="contact-name"></div><div class="input-group"><input name="email" placeholder="Email" id="contact-email"></div><div class="input-group"><select name="subject" id="contact-subject"><option value="" disabled selected hidden>Pick your interest...</option><option value="Invite to speak">Invite to speak</option><option value="Request a workshop">Request a workshop</option><option value="Guest authoring in blo">Guest authoring in blog</option><option value="Just to say hello">Just to say hello</option></select></div><div class="input-group"><textarea name="message" placeholder="Type your message here" id="contact-message"></textarea></div><button class="button">Send</button></form></div></section><header id="header"><div class="container"><nav id="main-nav"><div id="logo"><a href="/"><img src="/img/logo.png"></a></div><ul class="nav-links"><li><a href="/">Courses</a></li><li><a href="/speaking/">Speaking</a></li><li><a href="/cheatsheets/" target="_self">Cheatsheets</a></li><li><a class="active" href="/blog/">Blog</a></li><li><a href="/about/">About</a></li><li><a class="open-contacts open-lightbox" href="#lightbox-contact" data-id="lightbox-contact" data-subject="Just to say hello">Contact</a></li></ul></nav></div></header><section id="post"><div class="container"><article><h1 class="title">Bots at community service</h1><div class="meta"><a class="author" href="/about}" target="_self">Andrey Adamovich</a><span class="divider">&middot;</span><time class="date timeago" datetime="2017-10-25T00:00:00.000Z">2017-10-25T00:00:00.000Z</time></div><div class="content markdown"><p>Local software community/meet-up management involves a lot of repetitive tasks: event publishing, notifications, statistical reports. Groovy, AWS Lambda, Terraform and Slack appeared to be a good combination to help creating valuable automation scripts and bots integrated into team&#39;s chat and ready to help.</p>
<p>It&#39;s about the community I&#39;m part of for last 3 years - <a href="http://latcraft.lv/">LatCraft</a>. It is the community of awesome Latvian software craftsmen and craftswomen. We host events, where we invite amazing speakers from across the world.</p>
<h2 id="the-challenge">The challenge</h2>
<p>Announcing an event takes a lot of effort. We use Trello board to remember all the things we have to do:   </p>
<p><img src="/img/posts/2018/bots/LC_TRELLO.png" alt="repositories"></p>
<p>There are so many systems, where we need to publish data about the upcoming event to make it efficient and cover as much audience as we can:</p>
<p><img src="/img/posts/2018/bots/INTEGRATIONS.png" alt="repositories"></p>
<p>Simply copying and pasting the same information over different services is not error-prone. It&#39;s also extremely annoying to do it over and over again. Typos, broken links, updates, ... argh! </p>
<h2 id="publishing">Publishing</h2>
<p>We started by writing some helper scripts in Groovy to smooth the process of event publishing. Over time we realized that event data should be read from only one source to avoid copy-pasting errors. </p>
<p>So, the role of <strong>master data</strong> is played by the <a href="https://github.com/latcraft/website/tree/master/data">JSON file</a>, from which we generate our <a href="http://latcraft.lv">website</a>. All our scripts (and later on, our bot commands) read (and eventually, also, write) data into that file. </p>
<p>Initially, we were happy with our Groovy scripts. But since we wanted to spread publishing responsibilities among our team members and not all people were comfortable enough to run those Groovy scripts (not all folks are active Java developers and some are even non-technical at all), we had to find a more convenient way to help with publishing process.   </p>
<p>That led us to the idea of creating a set of integrations with Slack, where most of our discussions happen.</p>
<p>Let me introduce you to the <strong>CraftBot</strong>:</p>
<p><img src="/img/posts/2018/bots/SCREEN_CRAFTBOT_HELP.png" alt="craftbot"></p>
<p>Each of the commands was originally a Groovy script, which is now deployed as a separate AWS Lambda function, but will get into technical details later. </p>
<p>The first thing, which is done by the person responsible for the event publishing, is to create a new event record in the master data on GitHub. Then he or she has to execute a series of CraftBot commands to publish event information validating and fixing any typos on the way.</p>
<p>We usually start with posting event information to EventBrite. This can be achieved now with a simple command: </p>
<p><img src="/img/posts/2018/bots/SCREEN_CRAFTBOT_PUBLISH_EVENTBRITE.png" alt="eventbrite"></p>
<p>CraftBot reads event data from GitHub, creates a new event in EventBrite and updates master JSON data in GitHub with a link to ticket registration. That data is immediately picked up by website building CI process (handled by <a href="https://travis-ci.org/latcraft/website">TravisCI</a>), and, in a minute or so, website is ready to accept registrations.</p>
<p><img src="/img/posts/2018/bots/EVENTBRITE_PUBLISHED_2.png" alt="eventbrite"></p>
<p>If there are any typos or updates, the event publisher can fix them in the master data and then reissue CraftBot&#39;s command to update the desired service. </p>
<p>We also generate a set of event cards to share them on various social networks. For example, this one: </p>
<p><img src="/img/posts/2018/bots/SCREEN_CRAFTBOT_PUBLISH_CARDS_1.png" alt="cards"></p>
<p>Or this one:</p>
<p><img src="/img/posts/2018/bots/SCREEN_CRAFTBOT_PUBLISH_CARDS_2.png" alt="cards"></p>
<p>We share those cards on Facebook:</p>
<p><img src="/img/posts/2018/bots/SCREEN_FACEBOOK.png" alt="facebook"></p>
<p>Twitter:</p>
<p><img src="/img/posts/2018/bots/SCREEN_TWITTER.png" alt="twitter"></p>
<p>Linkedin:</p>
<p><img src="/img/posts/2018/bots/SCREEN_LINKEDIN.png" alt="linkedin"></p>
<p>The final step is to generate invitation e-mail for loyal members of our community:</p>
<p><img src="/img/posts/2018/bots/SCREEN_CRAFTBOT_PUBLISH_CAMPAIGN.png" alt="campaign"></p>
<p>Sendgrid is used to send our invitations. Responsibility of the event publisher is to validate the layout and text of the e-mail:</p>
<p><img src="/img/posts/2018/bots/SCREEN_HTML.png" alt="html"></p>
<p><img src="/img/posts/2018/bots/SCREEN_SENDGRID.png" alt="sendgrid"></p>
<p>Ready! Steady! <strong>Go!</strong></p>
<p><img src="/img/posts/2018/bots/SCREEN_CRAFTBOT_SEND_CAMPAIGN.png" alt="send cmpaign"></p>
<p><strong>Sent!</strong> Now the community knows about the event: </p>
<p><img src="/img/posts/2018/bots/SCREEN_GMAIL.png" alt="gmail"></p>
<p>We can sit, relax and observe the incoming registrations. Of course, there is a CraftBot command for that:</p>
<p><img src="/img/posts/2018/bots/SCREEN_CRAFTBOT_GET_STATS.png" alt="get stats"></p>
<h2 id="implementation-details">Implementation details</h2>
<p>All CraftBot sub-commands are sent through the main <code>/craftbot</code> command implemented with the help of Slack&#39;s Slash command integration.</p>
<p><img src="/img/posts/2018/bots/SLASH_COMMAND.png" alt="slash command"></p>
<p>Slack sends command information to a service running on AWS behind API gateway. </p>
<p><img src="/img/posts/2018/bots/API_GATEWAY.png" alt="api gateway"></p>
<p>Then it is picked up by our main AWS Lambda function (router), which knows how to map Slack command data to invocations of our Groovy scripts that are deployed as a set of other AWS Lambda functions. High level stack looks like this: </p>
<p><img src="/img/posts/2018/bots/TECH_STACK_1.png" alt="api gateway"></p>
<p>The actual routing code is very simple as well:</p>
<p><img src="/img/posts/2018/bots/ROUTER_CODE.png" alt="router code"></p>
<p>I can describe many more technical details, but a picture is worth a thousand words. The following tools/services control provisioning of the infrastructure and continuous integration/deployment of the code:</p>
<p><img src="/img/posts/2018/bots/DEPLOYMENT.png" alt="repositories"></p>
<p>This picture describes all the integrations between CraftBot and external services:</p>
<p><img src="/img/posts/2018/bots/INTEGRATION.png" alt="repositories"></p>
<p>The following repositories are involved in the event publishing processes:</p>
<p><img src="/img/posts/2018/bots/REPOSITORIES.png" alt="repositories"></p>
<p>Looks cool, ah? How much does it cost? <strong>Zero, nada, nothing!</strong> That&#39;s the invoice I get for our AWS Lambda functions:</p>
<p><img src="/img/posts/2018/bots/LAMBDA_ZERO.png" alt="aws"></p>
<h2 id="conclusion">Conclusion</h2>
<p>What we achieved with all that automation:</p>
<ul>
<li>Decreased error rates</li>
<li>Event publishing log is in Slack (everybody can see that and repeat commands)</li>
<li>Non-technical team members involved in publishing</li>
<li>We don&#39;t pay a penny!</li>
<li>Happier team!</li>
</ul>
<p>For curious ones, the code is available <a href="https://github.com/latcraft/event-manager">here</a>.</p>
<p><img src="/img/posts/2018/bots/GITHUB_EVENT_MANAGER.png" alt="github"></p>
</div></article><div class="share" id="share-scroll"><ul><li><a class="twitter" href="https://twitter.com/intent/tweet?text=Bots%20at%20community%20service&amp;url=http%3A%2F%2Fextremeautomation.io%2Fblog%2Fbots-at-community-service%2F" target="_blank"><i class="socicon socicon-twitter"></i></a></li><li><a class="facebook" href="https://www.facebook.com/dialog/share?app_id=1695100660759600&amp;display=popup&amp;href=http%3A%2F%2Fextremeautomation.io%2Fblog%2Fbots-at-community-service%2F" target="_blank"><i class="socicon socicon-facebook"></i></a></li><li><a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fextremeautomation.io%2Fblog%2Fbots-at-community-service%2F&amp;title=Bots%20at%20community%20service&amp;summary=Local%20software%20community%2Fmeet-up%20management%20involves%20a%20lot%20of%20repetitive%20tasks%3A%20event%20publishing%2C%20notifications%2C%20statistical%20reports.%20Groovy%2C%20AWS%20Lambda%2C%20Terraform%20and%20Slack%20appeared%20to%20be%20a%20good%20combination%20to%20help%20creating%20valuable%20automation%20scripts%20and%20bots%20integrated%20into%20team's%20chat%20and%20ready%20to%20help.&amp;source=Extreme%20Automation" target="_blank"><i class="socicon socicon-linkedin"></i></a></li><li><a class="rss" href="/blog/rss.xml" target="_blank"><i class="socicon socicon-rss"></i></a></li></ul></div><div class="footer"><div class="links"><h4>Share</h4><ul class="share color"><li><a class="twitter" href="https://twitter.com/intent/tweet?text=Bots%20at%20community%20service&amp;url=http%3A%2F%2Fextremeautomation.io%2Fblog%2Fbots-at-community-service%2F" target="_blank"><i class="socicon socicon-twitter"></i></a></li><li><a class="facebook" href="https://www.facebook.com/dialog/share?app_id=1695100660759600&amp;display=popup&amp;href=http%3A%2F%2Fextremeautomation.io%2Fblog%2Fbots-at-community-service%2F" target="_blank"><i class="socicon socicon-facebook"></i></a></li><li><a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3A%2F%2Fextremeautomation.io%2Fblog%2Fbots-at-community-service%2F&amp;title=Bots%20at%20community%20service&amp;summary=Local%20software%20community%2Fmeet-up%20management%20involves%20a%20lot%20of%20repetitive%20tasks%3A%20event%20publishing%2C%20notifications%2C%20statistical%20reports.%20Groovy%2C%20AWS%20Lambda%2C%20Terraform%20and%20Slack%20appeared%20to%20be%20a%20good%20combination%20to%20help%20creating%20valuable%20automation%20scripts%20and%20bots%20integrated%20into%20team's%20chat%20and%20ready%20to%20help.&amp;source=Extreme%20Automation" target="_blank"><i class="socicon socicon-linkedin"></i></a></li></ul></div><div class="author"><div class="image"><a href="/about}" target="_self"><img src="/img/authors/andrey.jpg" alt="Andrey Adamovich"></a></div><div class="description"><a href="/about/" target="_self"><h4 class="name">Andrey Adamovich</h4></a><p>Andrey is a software craftsman with many years of experience in different lifecycle phases of software creation. He is passionate about defining good development practices, documenting and presenting architecture, reuse of code and design patterns, profiling and analysis of application performance as well as extreme automation of development and operations activities.</p></div></div></div></div></section><section id="comments"><div class="container"><div class="comments"><div id="disqus_thread"></div></div></div></section><footer id="footer"><div class="container"><div class="credit"><a id="go-up" href="#header">Beam me up, Scotty!</a><p>Friends with</p><a class="devchampions" href="http://devchampions.com"><img src="/img/logo-devchampions.png" alt="DevChampions"></a></div><div class="copy"><p>Copyright &copy; 2012-2018 Aestas/IT.<br>All rights reserved.</p><ul class="social"><li><a class="twitter" href="https://twitter.com/codingandrey" target="_blank"><i class="socicon socicon-twitter"></i></a></li><li><a class="linkedin" href="http://lv.linkedin.com/in/andreyadamovich" target="_blank"><i class="socicon socicon-linkedin"></i></a></li><li><a class="fork" href="https://github.com/aadamovich" target="_blank"><i class="socicon socicon-github"></i></a></li><li><a class="slideshare" href="http://slideshare.net/aestasit" target="_blank"><i class="socicon socicon-slideshare"></i></a></li><li><a class="rss" href="/blog/rss.xml" target="_blank"><i class="socicon socicon-rss"></i></a></li></ul></div></div></footer></div><script type="application/ld+json">{
  "@context" : "http://schema.org",
  "@type" : "Organization",
  "name" : "Extreme Automation",
  "url" : "http://extremeautomation.io"
}</script><script type="application/ld+json">{
  "@context": "http://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type":"WebPage",
    "@id":"http://extremeautomation.io/blog/"
  },
  "headline": "Bots at community service",
  "datePublished": "Wed Oct 25 2017 00:00:00 GMT+0000 (UTC)",
  "dateModified": "Wed Oct 25 2017 00:00:00 GMT+0000 (UTC)",
  "author": {
    "@type": "Person",
    "image": "http://extremeautomation.io/img/authors/andrey.jpg",
    "name": "Andrey Adamovich"
  },
  "publisher": {
    "@type": "Organization",
    "url": "http://extremeautomation.io",
    "name": "Extreme Automation"
  },
  "image": "http://extremeautomation.io/img/authors/andrey.jpg",
  "description": "Local software community/meet-up management involves a lot of repetitive tasks: event publishing, notifications, statistical reports. Groovy, AWS Lambda, Terraform and Slack appeared to be a good combination to help creating valuable automation scripts and bots integrated into team's chat and ready to help."
}</script><script src="//cdn.rawgit.com/visionmedia/page.js/master/page.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.5/ScrollMagic.min.js"></script><script src="/js/main.js"></script><script>var disqus_config = function () {
	this.page.url = "/" + String(title).toLowerCase().replace(/[^\w ]+/g,'').replace(/ +/g,'-') + "/";
	this.page.identifier = "http://extremeautomation.io";
};

(function() {
	var d = document, s = d.createElement('script');

	s.src = '//extreme-automation.disqus.com/embed.js';

	s.setAttribute('data-timestamp', +new Date());
	(d.head || d.body).appendChild(s);
})();</script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q || []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-22639123-7', 'auto');
ga('send', 'pageview');</script><script>!function(e,n,u,a){e.twq||(a=e.twq=function(){a.exe?a.exe.apply(a,arguments):
a.queue.push(arguments);},a.version='1',a.queue=[],t=n.createElement(u),
t.async=!0,t.src='//static.ads-twitter.com/uwt.js',s=n.getElementsByTagName(u)[0],
s.parentNode.insertBefore(t,s))}(window,document,'script');
twq('init','nvajy');
twq('track','PageView');</script><script>(function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter43683279 = new Ya.Metrika({ id:43683279, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks");</script><noscript><div><img src="https://mc.yandex.ru/watch/43683279" style="position:absolute; left:-9999px;" alt=""></div></noscript></body></html>